<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Request - E-Service Barangay Portal</title>
    <link rel="stylesheet" href="dashboard-style.css" />
    <style>
      .input-error {
        border: 1px solid red !important;
        background-color: #ffebeb !important;
      }

      .error-message {
        color: red;
        font-size: 0.85em;
        margin-top: 5px;
        display: block;
      }

      .other-input {
        display: none;
        margin-left: 10px;
        padding: 5px;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: auto;
      }

      .radio-option.has-other-input
        input[type="radio"]:checked
        + span
        + .other-input {
        display: inline-block;
      }

      .form-row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 15px;
      }

      .form-group {
        flex: 1;
        min-width: 200px;
      }

      .form-group.half-width {
        flex-basis: calc(50% - 10px);
        min-width: unset;
      }

      .name-inputs {
        display: flex;
        gap: 10px;
      }

      .name-inputs input {
        flex: 1;
      }

      .radio-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
      }

      .radio-option {
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .radio-option input[type="radio"] {
        margin-right: 5px;
      }

      textarea.form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }

      .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px; /* Space between buttons */
        margin-top: 20px;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
      }

      .btn-primary {
        background-color: #007bff;
        color: white;
      }

      .btn-secondary {
        background-color: #6c757d;
        color: white;
      }

      /* Keep the hidden class for dynamic visibility control by JavaScript */
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <header class="dashboard-header">
        <div class="header-content">
          <div class="header-left">
            <h1>E-Service Barangay Portal</h1>
          </div>
          <div class="header-right">
            <nav class="header-nav">
              <a href="homepage.html" class="nav-link">Home Page</a>
              <a href="announcement.html" class="nav-link">Announcement</a>
              <a href="about_us.html" class="nav-link">About Us</a>
              <a href="request-form.html" class="nav-link">My Request</a>
              <a href="index.html" class="nav-link">ðŸšª Log Out</a>
            </nav>
          </div>
        </div>
      </header>

      <main class="dashboard-main">
        <div class="request-form-container">
          <div class="form-header">
            <div class="portal-title">
              <h2>My Request</h2>
              <div class="portal-badge">E-Service Barangay Portal</div>
            </div>
          </div>

          <div class="request-form-card">
            <div class="form-section-header">
              <h3>Create Request</h3>
            </div>

            <form
              class="request-form"
              id="mainRequestForm"
              action="request-tracking.html"
              method="get"
            >
              <div class="form-row">
                <div class="form-group">
                  <label>Full Name:</label>
                  <div class="name-inputs">
                    <input
                      type="text"
                      placeholder="Last Name"
                      name="last_name"
                      required
                    />
                    <input
                      type="text"
                      placeholder="First Name"
                      name="first_name"
                      required
                    />
                    <input
                      type="text"
                      placeholder="Middle Initial"
                      name="middle_initial"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label>Age:</label>
                  <input type="number" name="age" required />
                </div>
                <div class="form-group half-width">
                  <label>Date of Birth:</label>
                  <input type="date" name="dob" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label>Gender:</label>
                  <div class="radio-group">
                    <label class="radio-option">
                      <input type="radio" name="gender" value="male" required />
                      <span>Male</span>
                    </label>
                    <label class="radio-option">
                      <input type="radio" name="gender" value="female" />
                      <span>Female</span>
                    </label>
                    <label class="radio-option">
                      <input type="radio" name="gender" value="other" />
                      <span>I prefer not to say</span>
                    </label>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label>Email:</label>
                  <input type="email" name="email" required />
                </div>
                <div class="form-group half-width">
                  <label>Phone Number:</label>
                  <input type="tel" name="phone_number" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label>House/Unit Number:</label>
                  <input type="text" name="house_number" required />
                </div>
                <div class="form-group half-width">
                  <label>Street Name:</label>
                  <input type="text" name="street_name" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label>Barangay:</label>
                  <input type="text" name="barangay" required />
                </div>
                <div class="form-group half-width">
                  <label>City/Municipality:</label>
                  <input type="text" name="city_municipality" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label>Province:</label>
                  <input type="text" name="province" required />
                </div>
                <div class="form-group half-width">
                  <label>Zip Code:</label>
                  <input
                    type="text"
                    name="zip_code"
                    pattern="[0-9]{4}"
                    title="Four digit zip code"
                    required
                  />
                </div>
              </div>
              <div class="form-row">
                <div class="form-group">
                  <label>Type of Request:</label>
                  <div class="radio-group">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="request-type"
                        value="document"
                        required
                      />
                      <span>Document</span>
                    </label>
                    <label class="radio-option">
                      <input type="radio" name="request-type" value="permit" />
                      <span>Permit</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="request-type"
                        value="socialServices"
                      />
                      <span>Social Services</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="request-type"
                        value="otherServices"
                      />
                      <span>Other Services</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="request-type"
                        value="complain"
                      />
                      <span>Complain</span>
                    </label>
                  </div>
                </div>
              </div>

              <div id="documentDetails" class="dynamic-section hidden">
                <div class="form-group">
                  <label>Document Purpose: For official Barangay papers</label>
                  <div class="radio-group type-of-doc-radio-group">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-type"
                        value="barangay-clearance"
                      />
                      <span>Barangay Clearance</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-type"
                        value="certificate-of-residency"
                      />
                      <span>Certificate of Residency</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-type"
                        value="certificate-of-indigency"
                      />
                      <span>Certificate of Indigency</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-type"
                        value="certificate-of-good-moral-character"
                      />
                      <span>Certificate of Good Moral Character</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-type"
                        value="barangay-id"
                      />
                      <span>Barangay ID</span>
                    </label>
                    <label class="radio-option has-other-input">
                      <input
                        type="radio"
                        name="document-type"
                        value="other-barangay-certificates"
                        data-radio-value="other-barangay-certificates"
                      />
                      <span>Other Barangay Certificates</span>
                      <input
                        type="text"
                        class="other-input"
                        placeholder="Please specify"
                      />
                    </label>
                  </div>
                </div>

                <div
                  id="documentReasons"
                  class="form-group hidden nested-dynamic-section"
                >
                  <label>Your Reasons:</label>
                  <div class="radio-group purpose-radio-group">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-purpose"
                        value="for-school"
                      />
                      <span>For School</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-purpose"
                        value="for-tesda"
                      />
                      <span>For TESDA</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-purpose"
                        value="personal-needs"
                      />
                      <span>Personal Needs</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="document-purpose"
                        value="job-application"
                      />
                      <span>Job Application</span>
                    </label>
                    <label class="radio-option has-other-input">
                      <input
                        type="radio"
                        name="document-purpose"
                        value="others"
                        data-radio-value="others"
                      />
                      <span>Others</span>
                      <input
                        type="text"
                        class="other-input"
                        placeholder="Please specify"
                      />
                    </label>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-secondary clear-dynamic-section"
                  data-section="documentDetails"
                >
                  Clear Choices
                </button>
              </div>

              <div id="permitDetails" class="dynamic-section hidden">
                <div class="form-group">
                  <label
                    >Permit Purpose: For official permissions from the
                    Barangay.</label
                  >
                  <div class="radio-group permit-type-radio-group">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="permit-type"
                        value="business-permit"
                      />
                      <span>Business Permit (New/Renewal)</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="permit-type"
                        value="tricycle-operators-permit"
                      />
                      <span>Tricycle Operators Permit (TOP)</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="permit-type"
                        value="construction-permit"
                      />
                      <span
                        >Construction Permit (Barangay Clearance for
                        Construction)</span
                      >
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="permit-type"
                        value="certificate-of-good-moral-character-permit"
                      />
                      <span>Certificate of Good Moral Character</span>
                    </label>
                    <label class="radio-option has-other-input">
                      <input
                        type="radio"
                        name="permit-type"
                        value="special-permit"
                        data-radio-value="special-permit"
                      />
                      <span>Special Permit (e.g., events, bazaars)</span>
                      <input
                        type="text"
                        class="other-input"
                        placeholder="Please specify"
                      />
                    </label>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-secondary clear-dynamic-section"
                  data-section="permitDetails"
                >
                  Clear Choices
                </button>
              </div>

              <div id="socialServicesDetails" class="dynamic-section hidden">
                <div class="form-group">
                  <label
                    >Social Services: Purpose: For requesting welfare or
                    aid.</label
                  >
                  <div class="radio-group social-service-type-radio-group">
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="social-service-type"
                        value="financial-assistance"
                      />
                      <span>Financial Assistance (AICS)</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="social-service-type"
                        value="medical-assistance"
                      />
                      <span>Medical Assistance</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="social-service-type"
                        value="burial-assistance"
                      />
                      <span>Burial Assistance</span>
                    </label>
                    <label class="radio-option">
                      <input
                        type="radio"
                        name="social-service-type"
                        value="referral-to-social-worker"
                      />
                      <span>Referral to Social Worker</span>
                    </label>
                    <label class="radio-option has-other-input">
                      <input
                        type="radio"
                        name="social-service-type"
                        value="others"
                        data-radio-value="others"
                      />
                      <span>Others</span>
                      <input
                        type="text"
                        class="other-input"
                        placeholder="Please specify"
                      />
                    </label>
                  </div>
                </div>
                <button
                  type="button"
                  class="btn btn-secondary clear-dynamic-section"
                  data-section="socialServicesDetails"
                >
                  Clear Choices
                </button>
              </div>

              <div id="otherServicesDetails" class="dynamic-section hidden">
                <div class="form-group">
                  <label
                    >Other Services: Purpose: A catch-all for requests not
                    fitting standard categories.</label
                  >
                  <textarea
                    class="form-control"
                    rows="5"
                    placeholder="Please specify your request"
                    name="other_services_details"
                  ></textarea>
                </div>
                <button
                  type="button"
                  class="btn btn-secondary clear-dynamic-section"
                  data-section="otherServicesDetails"
                >
                  Clear Choices
                </button>
              </div>

              <div id="complainDetails" class="dynamic-section hidden">
                <div class="form-group">
                  <label>Complain Details:</label>
                  <textarea
                    class="form-control"
                    rows="5"
                    placeholder="Please describe your complaint in detail"
                    name="complain_details"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label>Relevant individuals (optional):</label>
                  <input
                    type="text"
                    placeholder="Names of individuals involved"
                    name="complain_individuals"
                  />
                </div>
                <div class="form-group">
                  <label>Date of Incident (optional):</label>
                  <input type="date" name="complain_date" />
                </div>
                <button
                  type="button"
                  class="btn btn-secondary clear-dynamic-section"
                  data-section="complainDetails"
                >
                  Clear Choices
                </button>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn-secondary"
                  onclick="clearForm()"
                >
                  Clear All
                </button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  onclick="window.print()"
                >
                  Download Printable Form
                </button>
                <button type="submit" class="btn btn-primary">
                  Submit Request
                </button>
              </div>
            </form>
          </div>
        </div>
      </main>

      <footer class="dashboard-footer">
        <p>DIT 2-5 | WebDev | Team 9</p>
      </footer>
    </div>

    <script src="form-script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Prevent negative or zero age
        const ageInput = document.querySelector('input[name="age"]');
        if (ageInput) {
          ageInput.setAttribute("min", "1");
          ageInput.addEventListener("input", function () {
            if (this.value < 1) this.value = "";
          });
        }

        // Prevent future birthdates
        const dobInput = document.querySelector('input[name="dob"]');
        if (dobInput) {
          const today = new Date();
          const yyyy = today.getFullYear();
          const mm = String(today.getMonth() + 1).padStart(2, "0");
          const dd = String(today.getDate()).padStart(2, "0");
          const maxDate = `${yyyy}-${mm}-${dd}`;
          dobInput.setAttribute("max", maxDate);

          dobInput.addEventListener("change", function () {
            if (this.value > maxDate) {
              this.value = "";
              alert("Birthdate cannot be in the future.");
            }
          });
        }
      });
    </script>
  </body>
</html>
